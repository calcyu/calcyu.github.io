---
title: 哈夫曼编码
tag:
- 哈夫曼树
- 哈夫曼编码
- 最优二叉树
- binary tree
- huffman code
---

## 一、 背景

1951年 哈夫曼 在麻省理工学院（MIT）攻读博士学位导师 Robert 布置了作业 “查找最有效的二进制编码”
数学学的不是很好，无法计算证实已有编码的最有效性有序频率二叉树

## 二、什么是二叉树

二叉树是每个结点最多有两个子结点的树结构。

![img](2019-09-18-huffman-code.assets/i1.png)

## 三、什么是二叉树遍历

> java中的遍历（for iterator 访问集合中的每一个对象）

所谓遍历(Traversal)是指沿着某条搜索路线，依次对树中每个结点均做一次且仅做一次访问。

**遍历方案**

1. 访问结点本身（N）
2. 遍历该结点的左子树（L）
3. 遍历该结点的右子树（R）

以上三种操作有六种执行次序：

NLR、LNR、LRN、NRL、RNL、RLN。

## 四、什么是哈夫曼树

> 哈夫曼树可以认为是在二叉树的基本之上针对某些特殊需求的变异优化

给定N个权值作为N个叶子结点，构造一棵二叉树，若该树的带权路径长度达到最小，称这样的二叉树为最优二叉树，也称为哈夫曼树(Huffman Tree)。哈夫曼树是带权路径长度最短的树，权值较大的结点离根较近。



## 五、应用场景（悬念）

压缩技术（信息存储技术）、编码、算法、数据结构

> 需要用到最优算法的场景，都可以思考哈夫曼是否可以解决

## 六、哈夫曼基本概念（术语解释）

![1568775707209](2019-09-18-huffman-code.assets/1568775707209.png)

- 路径：

一个结点到另一个结点之间的通路，称为路径。

- 路径长度：

一个结点到另一个结点的距离。

>  例如：每个结点的距离视为1，则根结点到结点`ADC`的路径长度为2

- 结点的权值：

给每一个结点赋予一个新的数值，被称为这个结点的权。

> 例如：图 1 中节 `中单` 的权为 7，结点`辅助`的权为10

- 结点的带权路径长度：

指的是从根结点到该结点之间的路径长度与该结点的权的乘积。

> 例如：图 1 中结点`打野`的带权路径长度为 2 * 9 = 18 。

- 树的带权路径长度(Weighted Path Length of Tree，简称为WPL)：

指树中所有叶子结点的带权路径长度之和。

>  例如：图 1 二叉树的带权路径长度，WPL = 8\*2+9\*2+10\*2+6*3+7+3=93



## 七、哈夫曼树构建（种树）

>  原则：权重越大的离根结点越近，权重越小的离根结点越远，由底向上的方式构建二叉树



**建树流程**

1. 根据权值由小到大排序

2. 取出权值最小的两个做为叶子结点，权值之和做为父结点构建一个二叉树

3. 把刚取出的两个最小的值从队列中移除，把新增权值（两最小数之和）加入队列排序

4. 重复第二步，直到结束

![img](2019-09-18-huffman-code.assets/huffman-build5.gif)



**哈夫曼特殊情况（权值相同）**



![img](2019-09-18-huffman-code.assets/i2.png)

 

​    从上图可知,尽管叶结点的权值都是1,但是,不一定都在同一层.

​    有的叶结点在最后一层,而有的在倒数第二层.







## 八、哈夫曼编码

哈夫曼编码(Huffman Coding)，又称霍夫曼编码，是一种编码方式，哈夫曼编码是可变字长编码(VLC)的一种。Huffman于1952年提出一种编码方法，该方法完全依据字符出现概率来构造异字头的平均长度最短的码字，有时称之为最佳编码，一般就叫做Huffman编码（有时也称为霍夫曼编码）。

>  哈夫曼编码：是基于哈夫曼二叉树的一种编码方式，广泛应用在数据压缩领域。



**什么是编码**

是信息从一种形式转换为另一种形式的过程

> 编码涵盖的领域很广，应用程序开发、信息数据存储、网络通信等

- 应用程序开发

例如：我们写的java程序被编译成字节码可以运行在java虚拟机中

- 信息数据存储

硬盘、U盘等存储媒介只能保存二进制数据（也就是只有0|1）

网上下载的一封情书保存在U盘上

情书内容：小丽，我天天在想你！

```
小 0001
丽 0010
， 0011
我 0100
...
```

最终保存在硬盘上的数据是

`0001001000110100`

**什么是解码**

把上面的二进制数据，根据编码表进行反向映射



**哈夫曼树的特征**

1. 变长编码

2. 每一个编码不会前缀冲突（任意某个编码都不是另一个编码的前缀）



## 哈夫曼事例代码

**项目代码包括：**

1. 二叉树随机生成
2. 二叉树遍历（前序、中序）
3. 哈夫曼树生成
4. 哈夫曼树图形化打印
5. 哈夫曼编码生成

【[项目地址](https://github.com/calcyu/huffman-code-demo)】

![1568794292724](2019-09-18-huffman-code.assets/1568794292724.png)